{
  "hash": "c22b5c3299b6c5e4c5f46b13efbcaab5",
  "result": {
    "engine": "knitr",
    "markdown": "# Basic workflow\n\nIn this section, we will show a basic workflow of performing ER analysis\nfor binary endpoint using the logistic regression model.\n\n## Setup and load\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(BayesERtools)\nlibrary(posterior)\nlibrary(here)\nlibrary(gt)\n\ntheme_set(theme_bw(base_size = 12))\n```\n:::\n\n\n\n\n\n\n\n## Data\n\nWe will use an example simulated dataset included in `BayesERtools` package \n(`d_sim_binom_cov`) for the analysis.\nIn this document we use hypoglycemia (hgly2) as an example AE. Another example\nAE is diarrhea (dr2), where you would see fairly flat ER curve.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(d_sim_binom_cov)\n\nhead(d_sim_binom_cov) |> \n  gt() |>\n  fmt_number(n_sigfig = 3) |>\n  fmt_integer(columns = c(\"ID\", \"AEFLAG\", \"Dose_mg\"))\n\nd_sim_binom_cov_2 <-\n  d_sim_binom_cov |>\n  mutate(\n    AUCss_1000 = AUCss / 1000, BAGE_10 = BAGE / 10,\n    BWT_10 = BWT / 10, BHBA1C_5 = BHBA1C / 5,\n    Dose = glue::glue(\"{Dose_mg} mg\")\n  )\n\n# Grade 2+ hypoglycemia\ndf_er_ae_hgly2 <- d_sim_binom_cov_2 |> filter(AETYPE == \"hgly2\")\n# Grade 2+ diarrhea\ndf_er_ae_dr2 <- d_sim_binom_cov_2 |> filter(AETYPE == \"dr2\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"avhmcboadf\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#avhmcboadf table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#avhmcboadf thead, #avhmcboadf tbody, #avhmcboadf tfoot, #avhmcboadf tr, #avhmcboadf td, #avhmcboadf th {\n  border-style: none;\n}\n\n#avhmcboadf p {\n  margin: 0;\n  padding: 0;\n}\n\n#avhmcboadf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#avhmcboadf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#avhmcboadf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#avhmcboadf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#avhmcboadf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#avhmcboadf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#avhmcboadf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#avhmcboadf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#avhmcboadf .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#avhmcboadf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#avhmcboadf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#avhmcboadf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#avhmcboadf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#avhmcboadf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#avhmcboadf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#avhmcboadf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#avhmcboadf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#avhmcboadf .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#avhmcboadf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#avhmcboadf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#avhmcboadf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#avhmcboadf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#avhmcboadf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#avhmcboadf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#avhmcboadf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#avhmcboadf .gt_left {\n  text-align: left;\n}\n\n#avhmcboadf .gt_center {\n  text-align: center;\n}\n\n#avhmcboadf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#avhmcboadf .gt_font_normal {\n  font-weight: normal;\n}\n\n#avhmcboadf .gt_font_bold {\n  font-weight: bold;\n}\n\n#avhmcboadf .gt_font_italic {\n  font-style: italic;\n}\n\n#avhmcboadf .gt_super {\n  font-size: 65%;\n}\n\n#avhmcboadf .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#avhmcboadf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#avhmcboadf .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#avhmcboadf .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#avhmcboadf .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#avhmcboadf .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#avhmcboadf .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#avhmcboadf .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#avhmcboadf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"ID\">ID</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AETYPE\">AETYPE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AEFLAG\">AEFLAG</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Dose_mg\">Dose_mg</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AUCss\">AUCss</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Cmaxss\">Cmaxss</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Cminss\">Cminss</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BAGE\">BAGE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BWT\">BWT</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BGLUC\">BGLUC</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BHBA1C\">BHBA1C</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"RACE\">RACE</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"VISC\">VISC</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"ID\" class=\"gt_row gt_right\">1</td>\n<td headers=\"AETYPE\" class=\"gt_row gt_left\">hgly2</td>\n<td headers=\"AEFLAG\" class=\"gt_row gt_right\">0</td>\n<td headers=\"Dose_mg\" class=\"gt_row gt_right\">200</td>\n<td headers=\"AUCss\" class=\"gt_row gt_right\">866</td>\n<td headers=\"Cmaxss\" class=\"gt_row gt_right\">64.3</td>\n<td headers=\"Cminss\" class=\"gt_row gt_right\">10.1</td>\n<td headers=\"BAGE\" class=\"gt_row gt_right\">84.4</td>\n<td headers=\"BWT\" class=\"gt_row gt_right\">74.1</td>\n<td headers=\"BGLUC\" class=\"gt_row gt_right\">4.65</td>\n<td headers=\"BHBA1C\" class=\"gt_row gt_right\">31.5</td>\n<td headers=\"RACE\" class=\"gt_row gt_left\">White</td>\n<td headers=\"VISC\" class=\"gt_row gt_left\">No</td></tr>\n    <tr><td headers=\"ID\" class=\"gt_row gt_right\">1</td>\n<td headers=\"AETYPE\" class=\"gt_row gt_left\">dr2</td>\n<td headers=\"AEFLAG\" class=\"gt_row gt_right\">0</td>\n<td headers=\"Dose_mg\" class=\"gt_row gt_right\">200</td>\n<td headers=\"AUCss\" class=\"gt_row gt_right\">866</td>\n<td headers=\"Cmaxss\" class=\"gt_row gt_right\">64.3</td>\n<td headers=\"Cminss\" class=\"gt_row gt_right\">10.1</td>\n<td headers=\"BAGE\" class=\"gt_row gt_right\">84.4</td>\n<td headers=\"BWT\" class=\"gt_row gt_right\">74.1</td>\n<td headers=\"BGLUC\" class=\"gt_row gt_right\">4.65</td>\n<td headers=\"BHBA1C\" class=\"gt_row gt_right\">31.5</td>\n<td headers=\"RACE\" class=\"gt_row gt_left\">White</td>\n<td headers=\"VISC\" class=\"gt_row gt_left\">No</td></tr>\n    <tr><td headers=\"ID\" class=\"gt_row gt_right\">1</td>\n<td headers=\"AETYPE\" class=\"gt_row gt_left\">ae_covsel_test</td>\n<td headers=\"AEFLAG\" class=\"gt_row gt_right\">0</td>\n<td headers=\"Dose_mg\" class=\"gt_row gt_right\">200</td>\n<td headers=\"AUCss\" class=\"gt_row gt_right\">866</td>\n<td headers=\"Cmaxss\" class=\"gt_row gt_right\">64.3</td>\n<td headers=\"Cminss\" class=\"gt_row gt_right\">10.1</td>\n<td headers=\"BAGE\" class=\"gt_row gt_right\">84.4</td>\n<td headers=\"BWT\" class=\"gt_row gt_right\">74.1</td>\n<td headers=\"BGLUC\" class=\"gt_row gt_right\">4.65</td>\n<td headers=\"BHBA1C\" class=\"gt_row gt_right\">31.5</td>\n<td headers=\"RACE\" class=\"gt_row gt_left\">White</td>\n<td headers=\"VISC\" class=\"gt_row gt_left\">No</td></tr>\n    <tr><td headers=\"ID\" class=\"gt_row gt_right\">2</td>\n<td headers=\"AETYPE\" class=\"gt_row gt_left\">hgly2</td>\n<td headers=\"AEFLAG\" class=\"gt_row gt_right\">0</td>\n<td headers=\"Dose_mg\" class=\"gt_row gt_right\">200</td>\n<td headers=\"AUCss\" class=\"gt_row gt_right\">1,710</td>\n<td headers=\"Cmaxss\" class=\"gt_row gt_right\">166</td>\n<td headers=\"Cminss\" class=\"gt_row gt_right\">27.3</td>\n<td headers=\"BAGE\" class=\"gt_row gt_right\">59.1</td>\n<td headers=\"BWT\" class=\"gt_row gt_right\">88.2</td>\n<td headers=\"BGLUC\" class=\"gt_row gt_right\">7.24</td>\n<td headers=\"BHBA1C\" class=\"gt_row gt_right\">41.9</td>\n<td headers=\"RACE\" class=\"gt_row gt_left\">White</td>\n<td headers=\"VISC\" class=\"gt_row gt_left\">No</td></tr>\n    <tr><td headers=\"ID\" class=\"gt_row gt_right\">2</td>\n<td headers=\"AETYPE\" class=\"gt_row gt_left\">dr2</td>\n<td headers=\"AEFLAG\" class=\"gt_row gt_right\">0</td>\n<td headers=\"Dose_mg\" class=\"gt_row gt_right\">200</td>\n<td headers=\"AUCss\" class=\"gt_row gt_right\">1,710</td>\n<td headers=\"Cmaxss\" class=\"gt_row gt_right\">166</td>\n<td headers=\"Cminss\" class=\"gt_row gt_right\">27.3</td>\n<td headers=\"BAGE\" class=\"gt_row gt_right\">59.1</td>\n<td headers=\"BWT\" class=\"gt_row gt_right\">88.2</td>\n<td headers=\"BGLUC\" class=\"gt_row gt_right\">7.24</td>\n<td headers=\"BHBA1C\" class=\"gt_row gt_right\">41.9</td>\n<td headers=\"RACE\" class=\"gt_row gt_left\">White</td>\n<td headers=\"VISC\" class=\"gt_row gt_left\">No</td></tr>\n    <tr><td headers=\"ID\" class=\"gt_row gt_right\">2</td>\n<td headers=\"AETYPE\" class=\"gt_row gt_left\">ae_covsel_test</td>\n<td headers=\"AEFLAG\" class=\"gt_row gt_right\">1</td>\n<td headers=\"Dose_mg\" class=\"gt_row gt_right\">200</td>\n<td headers=\"AUCss\" class=\"gt_row gt_right\">1,710</td>\n<td headers=\"Cmaxss\" class=\"gt_row gt_right\">166</td>\n<td headers=\"Cminss\" class=\"gt_row gt_right\">27.3</td>\n<td headers=\"BAGE\" class=\"gt_row gt_right\">59.1</td>\n<td headers=\"BWT\" class=\"gt_row gt_right\">88.2</td>\n<td headers=\"BGLUC\" class=\"gt_row gt_right\">7.24</td>\n<td headers=\"BHBA1C\" class=\"gt_row gt_right\">41.9</td>\n<td headers=\"RACE\" class=\"gt_row gt_left\">White</td>\n<td headers=\"VISC\" class=\"gt_row gt_left\">No</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nWe also defines variables that is used in the analysis.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvar_resp <- \"AEFLAG\"\n# HbA1c & glucose are only relevant for hyperglycemia\nvar_cov_ae_hgly2 <-\n  c(\"BAGE_10\", \"BWT_10\", \"RACE\", \"VISC\", \"BHBA1C_5\", \"BGLUC\")\nvar_cov_ae_dr2 <-\n  c(\"BAGE_10\", \"BWT_10\", \"RACE\", \"VISC\")\n```\n:::\n\n\n\n\n\n## Basic model development\n\n`dev_ermod_bin()` function can be used to develop basic ER model. (Note that\nthis function can also be used for models with covariates, if you already know\nthe covariates to be included.)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nermod_bin <- dev_ermod_bin(\n  data = df_er_ae_hgly2,\n  var_resp = var_resp,\n  var_exposure = \"AUCss_1000\"\n)\nermod_bin\n```\n\n<pre class=\"r-output\"><code>\n<span style='color: #00BBBB;'>──</span> <span style='font-weight: bold;'>Binary ER model</span> <span style='color: #00BBBB;'>─────────────────────────────────────────────────────────────</span>\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_er()` to visualize ER curve\n\n── <span style='font-weight: bold;'>Developed model</span> ──\n\nstan_glm\n family:       binomial [logit]\n formula:      AEFLAG ~ AUCss_1000\n observations: 500\n predictors:   2\n------\n            Median MAD_SD\n(Intercept) -2.04   0.23 \nAUCss_1000   0.41   0.08 \n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n</code></pre>\n:::\n\n\n\n\nYou can compare the observed data with the model fit using `plot_er_gof()` \nfunction.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Using `*` instead of `+` so that scale can be\n# applied for both panels (main plot and boxplot)\nplot_er_gof(ermod_bin, var_group = \"Dose\", show_coef_exp = TRUE) *\n  xgxr::xgx_scale_x_log10()\n```\n\n::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-plot-er-1.png){#fig-plot-er width=672}\n:::\n:::\n\n\n\n\nMCMC samples can be obtained with `as_draws()` family of functions, such as\n`as_draws_df()`.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndraws_df <- as_draws_df(ermod_bin)\n\ndraws_df_summary <-\n  draws_df |> \n  summarize_draws(mean, median, sd, ~quantile2(.x, probs = c(0.025, 0.975)), \n    default_convergence_measures()) \n\ndraws_df_summary |>\n  gt() |>\n  fmt_number(n_sigfig = 3)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"nnknajtwbo\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#nnknajtwbo table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#nnknajtwbo thead, #nnknajtwbo tbody, #nnknajtwbo tfoot, #nnknajtwbo tr, #nnknajtwbo td, #nnknajtwbo th {\n  border-style: none;\n}\n\n#nnknajtwbo p {\n  margin: 0;\n  padding: 0;\n}\n\n#nnknajtwbo .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#nnknajtwbo .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#nnknajtwbo .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#nnknajtwbo .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#nnknajtwbo .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#nnknajtwbo .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#nnknajtwbo .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#nnknajtwbo .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#nnknajtwbo .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#nnknajtwbo .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#nnknajtwbo .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#nnknajtwbo .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#nnknajtwbo .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#nnknajtwbo .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#nnknajtwbo .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nnknajtwbo .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#nnknajtwbo .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#nnknajtwbo .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#nnknajtwbo .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nnknajtwbo .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#nnknajtwbo .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nnknajtwbo .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#nnknajtwbo .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nnknajtwbo .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#nnknajtwbo .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#nnknajtwbo .gt_left {\n  text-align: left;\n}\n\n#nnknajtwbo .gt_center {\n  text-align: center;\n}\n\n#nnknajtwbo .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#nnknajtwbo .gt_font_normal {\n  font-weight: normal;\n}\n\n#nnknajtwbo .gt_font_bold {\n  font-weight: bold;\n}\n\n#nnknajtwbo .gt_font_italic {\n  font-style: italic;\n}\n\n#nnknajtwbo .gt_super {\n  font-size: 65%;\n}\n\n#nnknajtwbo .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#nnknajtwbo .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#nnknajtwbo .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#nnknajtwbo .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#nnknajtwbo .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#nnknajtwbo .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#nnknajtwbo .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#nnknajtwbo .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#nnknajtwbo div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"variable\">variable</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mean\">mean</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"median\">median</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"sd\">sd</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"q2.5\">q2.5</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"q97.5\">q97.5</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"rhat\">rhat</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"ess_bulk\">ess_bulk</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"ess_tail\">ess_tail</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"variable\" class=\"gt_row gt_left\">(Intercept)</td>\n<td headers=\"mean\" class=\"gt_row gt_right\">−2.05</td>\n<td headers=\"median\" class=\"gt_row gt_right\">−2.04</td>\n<td headers=\"sd\" class=\"gt_row gt_right\">0.234</td>\n<td headers=\"q2.5\" class=\"gt_row gt_right\">−2.51</td>\n<td headers=\"q97.5\" class=\"gt_row gt_right\">−1.59</td>\n<td headers=\"rhat\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"ess_bulk\" class=\"gt_row gt_right\">2,230</td>\n<td headers=\"ess_tail\" class=\"gt_row gt_right\">1,870</td></tr>\n    <tr><td headers=\"variable\" class=\"gt_row gt_left\">AUCss_1000</td>\n<td headers=\"mean\" class=\"gt_row gt_right\">0.412</td>\n<td headers=\"median\" class=\"gt_row gt_right\">0.412</td>\n<td headers=\"sd\" class=\"gt_row gt_right\">0.0761</td>\n<td headers=\"q2.5\" class=\"gt_row gt_right\">0.265</td>\n<td headers=\"q97.5\" class=\"gt_row gt_right\">0.561</td>\n<td headers=\"rhat\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"ess_bulk\" class=\"gt_row gt_right\">2,150</td>\n<td headers=\"ess_tail\" class=\"gt_row gt_right\">2,140</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\nYou can predict the probability of events for a given exposure level with\n`sim_er_new_exp()` function.\n\nHere, the prediction is done for AUCss_1000 of 1, 1.5, 2, 3 (AUCss of 1000, \n1500, 2000, 3000), and the output is the median and 95% CI of the predicted \nprobability.\nYou can set `output_type = \"draw\"` to get the raw posterior draws.\n\nThere are two types of outputs here, `.epred` and `.linpred`, as follows:\n\n- `.epred`: Expected response on the probability scale (% of event)\n- `.linpred`: Expected response on the linear predictor scale (logit scale, \n  i.e. log-odds)\n  \nSee `?BayesERtools::sim_er` for more details.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nersim_med_qi <- sim_er_new_exp(\n  ermod_bin,\n  exposure_to_sim_vec = c(1, 1.5, 2, 3),\n  output_type = \"median_qi\"\n)\nersim_med_qi |> \n  gt() |>\n  fmt_number(n_sigfig = 3) |>\n  fmt_integer(columns = c(\".row\"))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"oslyshlwzm\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#oslyshlwzm table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#oslyshlwzm thead, #oslyshlwzm tbody, #oslyshlwzm tfoot, #oslyshlwzm tr, #oslyshlwzm td, #oslyshlwzm th {\n  border-style: none;\n}\n\n#oslyshlwzm p {\n  margin: 0;\n  padding: 0;\n}\n\n#oslyshlwzm .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#oslyshlwzm .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#oslyshlwzm .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#oslyshlwzm .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#oslyshlwzm .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#oslyshlwzm .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#oslyshlwzm .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#oslyshlwzm .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#oslyshlwzm .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#oslyshlwzm .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#oslyshlwzm .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#oslyshlwzm .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#oslyshlwzm .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#oslyshlwzm .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#oslyshlwzm .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oslyshlwzm .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#oslyshlwzm .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#oslyshlwzm .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#oslyshlwzm .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oslyshlwzm .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#oslyshlwzm .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oslyshlwzm .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#oslyshlwzm .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oslyshlwzm .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oslyshlwzm .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oslyshlwzm .gt_left {\n  text-align: left;\n}\n\n#oslyshlwzm .gt_center {\n  text-align: center;\n}\n\n#oslyshlwzm .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#oslyshlwzm .gt_font_normal {\n  font-weight: normal;\n}\n\n#oslyshlwzm .gt_font_bold {\n  font-weight: bold;\n}\n\n#oslyshlwzm .gt_font_italic {\n  font-style: italic;\n}\n\n#oslyshlwzm .gt_super {\n  font-size: 65%;\n}\n\n#oslyshlwzm .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#oslyshlwzm .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#oslyshlwzm .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#oslyshlwzm .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#oslyshlwzm .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#oslyshlwzm .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#oslyshlwzm .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#oslyshlwzm .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#oslyshlwzm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AUCss_1000\">AUCss_1000</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.row\">.row</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.epred\">.epred</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.epred.lower\">.epred.lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.epred.upper\">.epred.upper</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.linpred\">.linpred</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.linpred.lower\">.linpred.lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.linpred.upper\">.linpred.upper</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.width\">.width</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.point\">.point</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a.interval\">.interval</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"AUCss_1000\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\".row\" class=\"gt_row gt_right\">1</td>\n<td headers=\".epred\" class=\"gt_row gt_right\">0.164</td>\n<td headers=\".epred.lower\" class=\"gt_row gt_right\">0.122</td>\n<td headers=\".epred.upper\" class=\"gt_row gt_right\">0.213</td>\n<td headers=\".linpred\" class=\"gt_row gt_right\">−1.63</td>\n<td headers=\".linpred.lower\" class=\"gt_row gt_right\">−1.97</td>\n<td headers=\".linpred.upper\" class=\"gt_row gt_right\">−1.31</td>\n<td headers=\".width\" class=\"gt_row gt_right\">0.950</td>\n<td headers=\".point\" class=\"gt_row gt_left\">median</td>\n<td headers=\".interval\" class=\"gt_row gt_left\">qi</td></tr>\n    <tr><td headers=\"AUCss_1000\" class=\"gt_row gt_right\">1.50</td>\n<td headers=\".row\" class=\"gt_row gt_right\">2</td>\n<td headers=\".epred\" class=\"gt_row gt_right\">0.194</td>\n<td headers=\".epred.lower\" class=\"gt_row gt_right\">0.153</td>\n<td headers=\".epred.upper\" class=\"gt_row gt_right\">0.240</td>\n<td headers=\".linpred\" class=\"gt_row gt_right\">−1.43</td>\n<td headers=\".linpred.lower\" class=\"gt_row gt_right\">−1.71</td>\n<td headers=\".linpred.upper\" class=\"gt_row gt_right\">−1.15</td>\n<td headers=\".width\" class=\"gt_row gt_right\">0.950</td>\n<td headers=\".point\" class=\"gt_row gt_left\">median</td>\n<td headers=\".interval\" class=\"gt_row gt_left\">qi</td></tr>\n    <tr><td headers=\"AUCss_1000\" class=\"gt_row gt_right\">2.00</td>\n<td headers=\".row\" class=\"gt_row gt_right\">3</td>\n<td headers=\".epred\" class=\"gt_row gt_right\">0.228</td>\n<td headers=\".epred.lower\" class=\"gt_row gt_right\">0.189</td>\n<td headers=\".epred.upper\" class=\"gt_row gt_right\">0.270</td>\n<td headers=\".linpred\" class=\"gt_row gt_right\">−1.22</td>\n<td headers=\".linpred.lower\" class=\"gt_row gt_right\">−1.46</td>\n<td headers=\".linpred.upper\" class=\"gt_row gt_right\">−0.993</td>\n<td headers=\".width\" class=\"gt_row gt_right\">0.950</td>\n<td headers=\".point\" class=\"gt_row gt_left\">median</td>\n<td headers=\".interval\" class=\"gt_row gt_left\">qi</td></tr>\n    <tr><td headers=\"AUCss_1000\" class=\"gt_row gt_right\">3.00</td>\n<td headers=\".row\" class=\"gt_row gt_right\">4</td>\n<td headers=\".epred\" class=\"gt_row gt_right\">0.308</td>\n<td headers=\".epred.lower\" class=\"gt_row gt_right\">0.266</td>\n<td headers=\".epred.upper\" class=\"gt_row gt_right\">0.354</td>\n<td headers=\".linpred\" class=\"gt_row gt_right\">−0.811</td>\n<td headers=\".linpred.lower\" class=\"gt_row gt_right\">−1.02</td>\n<td headers=\".linpred.upper\" class=\"gt_row gt_right\">−0.603</td>\n<td headers=\".width\" class=\"gt_row gt_right\">0.950</td>\n<td headers=\".point\" class=\"gt_row gt_left\">median</td>\n<td headers=\".interval\" class=\"gt_row gt_left\">qi</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n## Selection of exposure metrics\n\n`dev_ermod_bin_exp_sel()` function can be used to select the best exposure\nmetric(s) from a list of candidate exposure metrics. In this case, AUCss_1000\nis selected as the best exposure metric, as it had the highest elpd (expected \nlog predictive density).[^1]\n\n[^1]: Some references about elpd: \\code{?loo::`loo-glossary`}, [What is the interpretation of ELPD / elpd_loo / elpd_diff?](https://mc-stan.org/loo/articles/online-only/faq.html#elpd_interpretation)\n\nNote that whether you want to select exposure metrics using the statistical\ncriteria (e.g. elpd) or pre-specify the exposure metric(s) depends on the\ncontexts. Should you choose to pre-specify the exposure metric(s), you can\nskip this step.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nermod_bin_exp_sel <-\n  dev_ermod_bin_exp_sel(\n    # Use reduced N to make the example run faster\n    data = slice_sample(df_er_ae_hgly2, n = 100),\n    var_resp = var_resp,\n    var_exp_candidates = c(\"AUCss_1000\", \"Cmaxss\", \"Cminss\"),\n    # Use reduced iter to make the example run faster\n    iter = 1000\n  )\n```\n\n<pre class=\"r-output\"><code><span style='color: #00BBBB;'>ℹ</span> The exposure metric selected was: AUCss_1000\n</code></pre>\n\n```{.r .cell-code}\nermod_bin_exp_sel\n```\n\n<pre class=\"r-output\"><code>\n<span style='color: #00BBBB;'>──</span> <span style='font-weight: bold;'>Binary ER model & exposure metric selection</span> <span style='color: #00BBBB;'>─────────────────────────────────</span>\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_er_exp_sel()` for ER curve of all exposure metrics\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_er()` with `show_orig_data = TRUE` for ER curve of the selected exposure metric\n\n── <span style='font-weight: bold;'>Exposure metrics comparison</span> ──\n\n           elpd_diff se_diff\nAUCss_1000  0.00      0.00  \nCminss     -0.76      0.70  \nCmaxss     -0.91      0.97  \n\n── <span style='font-weight: bold;'>Selected model</span> ──\n\nstan_glm\n family:       binomial [logit]\n formula:      AEFLAG ~ AUCss_1000\n observations: 100\n predictors:   2\n------\n            Median MAD_SD\n(Intercept) -1.59   0.45 \nAUCss_1000   0.20   0.15 \n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n</code></pre>\n:::\n\n\n\n\nThe ER curve for all the evaluated exposure metrics can be generated with \n`plot_er_exp_sel()` function.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_er_exp_sel(ermod_bin_exp_sel) +\n  xgxr::xgx_scale_x_log10()\n```\n\n::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-exp-sel-1.png){#fig-exp-sel width=672}\n:::\n:::\n\n\n\n\n\n## Selection of covariates\n\n`dev_ermod_bin_cov_sel()` function can be used to select the best covariates\nfrom a list of candidate covariates. In this case, HbA1c (BHBA1C_5) and glucose\n(BGLUC) are selected, in addition to the exposure metric AUCss_1000 as \npredictors.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nermod_bin_cov_sel <-\n  dev_ermod_bin_cov_sel(\n    data = df_er_ae_hgly2,\n    var_resp = var_resp,\n    var_exposure = \"AUCss_1000\",\n    var_cov_candidate = var_cov_ae_hgly2,\n    verbosity_level = 2\n  )\n```\n:::\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nermod_bin_cov_sel\n```\n\n<pre class=\"r-output\"><code>\n<span style='color: #00BBBB;'>──</span> <span style='font-weight: bold;'>Binary ER model & covariate selection</span> <span style='color: #00BBBB;'>───────────────────────────────────────</span>\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_submod_performance()` to see variable selection performance\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_er()` with `marginal = TRUE` to visualize marginal ER curve\n\n── <span style='font-weight: bold;'>Selected model</span> ──\n\nstan_glm\n family:       binomial [logit]\n formula:      AEFLAG ~ AUCss_1000 + BHBA1C_5 + BGLUC\n observations: 500\n predictors:   4\n------\n            Median MAD_SD\n(Intercept) -11.00   1.12\nAUCss_1000    0.49   0.08\nBHBA1C_5      0.50   0.09\nBGLUC         0.74   0.13\n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n</code></pre>\n:::\n\n\n\n\nThe plot below shows that AUCss_1000, BHBA1C_5, and BGLUC contributes to \nimproving the model performance, and after then the inclusion of no other\ncovariates improves the model performance.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_submod_performance(ermod_bin_cov_sel)\n```\n\n::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-cov-sel-1.png){#fig-cov-sel width=672}\n:::\n:::\n\n\n\n\nIn some cases, you might see a warning message like below. This indicates that\napproximation of leave-one-out cross-validation performance (PSIS-LOO) is not\nreliable.\n\n```\nWarning: In the recalculation of the reference model's PSIS-LOO CV weights for \nthe performance evaluation, ... Pareto k-values are in the interval...`. \n```\n\nAlternatively to the default `cv_method = \"LOO\"`, you can use k-fold \ncross-validation by setting`cv_method = \"kfold\"` in `dev_ermod_bin_cov_sel()` \nfunction. This can take longer time to run, but it can be more reliable in\nthe cases where LOO is not reliable. You can also set `validate_search = TRUE`\nto let the function perform the variable selection for each fold separately,\nrather than using the selected variable sequence from the full dataset\nevaluation. \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(1234)\nermod_bin_cov_sel_kfold <-\n  dev_ermod_bin_cov_sel(\n    data = df_er_ae_hgly2,\n    var_resp = var_resp,\n    var_exposure = \"AUCss_1000\",\n    var_cov_candidate = var_cov_ae_hgly2,\n    cv_method = \"kfold\",\n    validate_search = TRUE,\n    verbosity_level = 2\n  )\n```\n:::\n\n\n\n\n\n\n\n\nAdded bonus of using k-fold cv is that you can visualize how often each \nvariable is selected in the model. Here, as you can see (and as expected),\nHbA1c (BHBA1C_5) and glucose (BGLUC) are highly related and they are almost\ninterchangeably selected in the 2nd and 3rd positions. Note that the function\nenforces the exposure metric to be included first in the model.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nermod_bin_cov_sel_kfold\n```\n\n<pre class=\"r-output\"><code>\n<span style='color: #00BBBB;'>──</span> <span style='font-weight: bold;'>Binary ER model & covariate selection</span> <span style='color: #00BBBB;'>───────────────────────────────────────</span>\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_submod_performance()` to see variable selection performance\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_var_ranking()` to see variable ranking\n<span style='color: #00BBBB;'>ℹ</span> Use `plot_er()` with `marginal = TRUE` to visualize marginal ER curve\n\n── <span style='font-weight: bold;'>Selected model</span> ──\n\nstan_glm\n family:       binomial [logit]\n formula:      AEFLAG ~ AUCss_1000 + BHBA1C_5 + BGLUC\n observations: 500\n predictors:   4\n------\n            Median MAD_SD\n(Intercept) -10.97   1.20\nAUCss_1000    0.49   0.09\nBHBA1C_5      0.50   0.09\nBGLUC         0.73   0.14\n------\n* For help interpreting the printed output see ?print.stanreg\n* For info on the priors used see ?prior_summary.stanreg\n</code></pre>\n\n```{.r .cell-code}\nplot_submod_performance(ermod_bin_cov_sel_kfold)\nplot_var_ranking(ermod_bin_cov_sel_kfold)\n```\n\n::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-cov-sel-kfold-1.png){#fig-cov-sel-kfold-1 width=672}\n:::\n\n::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-cov-sel-kfold-2.png){#fig-cov-sel-kfold-2 width=672}\n:::\n:::\n\n\n\n\n## Marginal ER prediction\n\nYou can simulate the marginal ER relationship, i.e. ER relationships for\n\"marginalized\", or averaged, response for the population of interest,\nusing `sim_er_new_exp_marg()` function.\nBy default, the covariate distribution is from the original data, but you can\nalso supply other distribution with `data_cov` argument.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nersim_new_exp_marg_med_qi <- sim_er_new_exp_marg(\n  ermod_bin_cov_sel,\n  exposure_to_sim_vec = c(2:6),\n  output_type = \"median_qi\"\n)\nersim_new_exp_marg_med_qi\n\nplot_er(ersim_new_exp_marg_med_qi, marginal = TRUE)\n```\n\n<pre class=\"r-output\"><code><span style='color: #555555;'># A tibble: 5 × 14</span>\n  .id_exposure AUCss_1000 .epred .epred.lower .epred.upper .linpred\n         <span style='color: #555555; font-style: italic;'><int></span>      <span style='color: #555555; font-style: italic;'><int></span>  <span style='color: #555555; font-style: italic;'><dbl></span>        <span style='color: #555555; font-style: italic;'><dbl></span>        <span style='color: #555555; font-style: italic;'><dbl></span>    <span style='color: #555555; font-style: italic;'><dbl></span>\n<span style='color: #555555;'>1</span>            1          2  0.226        0.190        0.263  -<span style='color: #BB0000;'>1.50</span>  \n<span style='color: #555555;'>2</span>            2          3  0.306        0.266        0.348  -<span style='color: #BB0000;'>1.01</span>  \n<span style='color: #555555;'>3</span>            3          4  0.399        0.338        0.457  -<span style='color: #BB0000;'>0.518</span> \n<span style='color: #555555;'>4</span>            4          5  0.496        0.412        0.583  -<span style='color: #BB0000;'>0.028</span><span style='color: #BB0000; text-decoration: underline;'>8</span>\n<span style='color: #555555;'>5</span>            5          6  0.595        0.482        0.701   0.470 \n<span style='color: #555555;'># ℹ 8 more variables: .linpred.lower <dbl>, .linpred.upper <dbl>,</span>\n<span style='color: #555555;'>#   .prediction <dbl>, .prediction.lower <dbl>, .prediction.upper <dbl>,</span>\n<span style='color: #555555;'>#   .width <dbl>, .point <chr>, .interval <chr></span>\n</code></pre>::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-marginal-er-1.png){#fig-marginal-er width=672}\n:::\n:::\n\n\n\n\n## Evaluation of covariate effects\n\nYou can visualize the effect of the covariates with `sim_coveff()` and\n`plot_coveff()` functions. You can see that all three predictors have \nfairly strong effects on the odds ratio of hypoglycemia.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoveffsim <- sim_coveff(ermod_bin_cov_sel)\nplot_coveff(coveffsim)\nprint_coveff(coveffsim)\n```\n\n<pre class=\"r-output\"><code><span style='color: #555555;'># A tibble: 9 × 5</span>\n  var_label  value_label value_annot `Odds ratio` `95% CI`        \n  <span style='color: #555555; font-style: italic;'><chr></span>      <span style='color: #555555; font-style: italic;'><chr></span>       <span style='color: #555555; font-style: italic;'><chr></span>       <span style='color: #555555; font-style: italic;'><chr></span>        <span style='color: #555555; font-style: italic;'><chr></span>           \n<span style='color: #555555;'>1</span> AUCss_1000 0.868       5th         0.514        <span style='color: #555555;'>\"</span>[0.427, 0.613]<span style='color: #555555;'>\"</span>\n<span style='color: #555555;'>2</span> AUCss_1000 2.21        median      1            <span style='color: #555555;'>\"</span> <span style='color: #555555;'>\"</span>             \n<span style='color: #555555;'>3</span> AUCss_1000 5.30        95th        4.60         <span style='color: #555555;'>\"</span>[3.08, 7.04]<span style='color: #555555;'>\"</span>  \n<span style='color: #555555;'>4</span> BHBA1C_5   5.75        5th         0.330        <span style='color: #555555;'>\"</span>[0.237, 0.455]<span style='color: #555555;'>\"</span>\n<span style='color: #555555;'>5</span> BHBA1C_5   7.97        median      1            <span style='color: #555555;'>\"</span> <span style='color: #555555;'>\"</span>             \n<span style='color: #555555;'>6</span> BHBA1C_5   10.4        95th        3.44         <span style='color: #555555;'>\"</span>[2.41, 4.97]<span style='color: #555555;'>\"</span>  \n<span style='color: #555555;'>7</span> BGLUC      4.43        5th         0.293        <span style='color: #555555;'>\"</span>[0.198, 0.420]<span style='color: #555555;'>\"</span>\n<span style='color: #555555;'>8</span> BGLUC      6.10        median      1            <span style='color: #555555;'>\"</span> <span style='color: #555555;'>\"</span>             \n<span style='color: #555555;'>9</span> BGLUC      7.59        95th        3.00         <span style='color: #555555;'>\"</span>[2.17, 4.25]<span style='color: #555555;'>\"</span>  \n</code></pre>::: {.cell-output-display}\n![](basic_workflow_files/figure-html/fig-cov-eff-1.png){#fig-cov-eff width=576}\n:::\n:::\n",
    "supporting": [
      "basic_workflow_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}